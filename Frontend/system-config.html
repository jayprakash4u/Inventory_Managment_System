<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>System Configuration</title>
    <!-- Montserrat font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <!-- Material Icon -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined"
      rel="stylesheet"
    />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="Css/style.css" />
    <link rel="stylesheet" href="Css/responsive.css" />
    <link rel="stylesheet" href="Css/user-profile.css" />
    <link rel="stylesheet" href="Css/inventory.css" />
    <style>
      .settings-card {
        background: white;
        border-radius: 8px;
        padding: 24px;
        margin-bottom: 20px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      .settings-card h3 {
        display: flex;
        align-items: center;
        gap: 12px;
        margin: 0 0 20px 0;
        font-size: 18px;
        color: #333;
        border-bottom: 2px solid #f0f0f0;
        padding-bottom: 12px;
      }

      .settings-card h3 .material-icons-outlined {
        color: #0066cc;
        font-size: 24px;
      }

      .settings-group {
        margin-bottom: 20px;
      }

      .settings-group:last-child {
        margin-bottom: 0;
      }

      .settings-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 16px;
      }

      .settings-row.full {
        grid-template-columns: 1fr;
      }

      .form-field {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .form-field label {
        font-weight: 600;
        color: #333;
        font-size: 14px;
      }

      .form-field small {
        color: #666;
        font-size: 12px;
      }

      .form-field input,
      .form-field select {
        padding: 10px 12px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 14px;
        font-family: inherit;
        transition: border-color 0.3s;
      }

      .form-field input:focus,
      .form-field select:focus {
        outline: none;
        border-color: #0066cc;
        box-shadow: 0 0 0 3px rgba(0, 102, 204, 0.1);
      }

      .checkbox-group {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-top: 8px;
      }

      .checkbox-group input[type="checkbox"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
        accent-color: #0066cc;
      }

      .checkbox-group label {
        cursor: pointer;
        margin: 0;
        font-weight: 500;
        color: #333;
      }

      .settings-actions {
        display: flex;
        gap: 12px;
        margin-top: 24px;
        padding-top: 24px;
        border-top: 1px solid #f0f0f0;
        justify-content: flex-end;
      }

      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s;
      }

      .btn-primary {
        background: #0066cc;
        color: white;
      }

      .btn-primary:hover {
        background: #0052a3;
      }

      .btn-secondary {
        background: #f0f0f0;
        color: #333;
        border: 1px solid #ddd;
      }

      .btn-secondary:hover {
        background: #e8e8e8;
      }

      .alert-message {
        padding: 12px 16px;
        border-radius: 6px;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 12px;
        display: none;
      }

      .alert-message.success {
        background: #d4edda;
        color: #155724;
        border-left: 4px solid #28a745;
        display: flex;
      }

      .alert-message.error {
        background: #f8d7da;
        color: #721c24;
        border-left: 4px solid #dc3545;
        display: flex;
      }

      @media (max-width: 768px) {
        .settings-row {
          grid-template-columns: 1fr;
        }

        .settings-actions {
          flex-direction: column;
          justify-content: flex-start;
        }

        .btn {
          width: 100%;
          justify-content: center;
        }
      }
    </style>
  </head>
  <body>
    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <div class="grid-container">
      <!-- Header -->
      <header class="header">
        <div class="header-left">
          <div class="menu-icon" id="menuIcon">
            <span class="material-icons-outlined">menu</span>
          </div>
          <div class="breadcrumb">
            <span class="material-icons-outlined">settings</span>
            <span>System Config</span>
          </div>
        </div>
        <div class="header-right">
          <div class="notifications">
            <span class="material-icons-outlined">notifications</span>
            <span class="badge notification-count">3</span>
          </div>
          <span class="material-icons-outlined">email</span>
          <div
            class="user-profile"
            role="button"
            tabindex="0"
            aria-haspopup="true"
            aria-expanded="false"
          >
            <img src="" alt="Profile" class="profile-pic" id="profilePic" />
            <div class="user-menu" role="menu">
              <div class="user-info">
                <img
                  src=""
                  alt="Profile"
                  class="menu-profile-pic"
                  id="menuProfilePic"
                />
                <div class="user-details">
                  <div class="user-display-name" id="menuUserName">User</div>
                  <div class="user-email" id="menuUserEmail">
                    user@example.com
                  </div>
                </div>
              </div>
              <div class="menu-divider"></div>
              <a
                href="#"
                role="menuitem"
                onclick="
                  event.preventDefault();
                  showProfile();
                  return false;
                "
              >
                <span class="material-icons-outlined">person</span>
                View Profile
              </a>
              <a
                href="#"
                role="menuitem"
                onclick="
                  event.preventDefault();
                  editProfilePicture();
                  return false;
                "
              >
                <span class="material-icons-outlined">photo_camera</span>
                Change Picture
              </a>
              <a
                href="#"
                role="menuitem"
                onclick="
                  event.preventDefault();
                  changePassword();
                  return false;
                "
              >
                <span class="material-icons-outlined">lock</span>
                Change Password
              </a>
              <a
                href="#"
                role="menuitem"
                onclick="
                  event.preventDefault();
                  accountSettings();
                  return false;
                "
              >
                <span class="material-icons-outlined">settings</span>
                Account Settings
              </a>
              <a
                href="#"
                role="menuitem"
                onclick="
                  event.preventDefault();
                  helpSupport();
                  return false;
                "
              >
                <span class="material-icons-outlined">help</span>
                Help & Support
              </a>
              <div class="menu-divider"></div>
              <a
                href="#"
                role="menuitem"
                onclick="
                  event.preventDefault();
                  logout();
                  return false;
                "
              >
                > >
                <span class="material-icons-outlined">logout</span>
                Logout
              </a>
            </div>
          </div>
        </div>
      </header>
      <!-- End Header -->

      <!-- Sidebar -->
      <aside id="sidebar">
        <div class="sidebar-title">
          <div class="sidebar-brand">
            <span class="material-icons-outlined">inventory</span>
            Inventory System
          </div>
          <span class="material-icons-outlined sidebar-close" id="sidebarClose"
            >close</span
          >
        </div>

        <ul class="sidebar-list">
          <li class="sidebar-list-item">
            <a href="Dashboard.html">
              <span class="material-icons-outlined">dashboard</span>
              Inventory Overview
            </a>
          </li>

          <li class="sidebar-list-item">
            <a href="inventory.html">
              <span class="material-icons-outlined">inventory</span>
              Product Stock
            </a>
          </li>

          <li class="sidebar-list-item">
            <a href="audit.html">
              <span class="material-icons-outlined">fact_check</span>
              Audit Trail
            </a>
          </li>

          <li class="sidebar-list-item">
            <a href="supplier.html">
              <span class="material-icons-outlined">add_shopping_cart</span>
              Supplier Orders
            </a>
          </li>

          <li class="sidebar-list-item">
            <a href="customer-orders.html">
              <span class="material-icons-outlined">shopping_cart</span>
              Customer Orders
            </a>
          </li>

          <li class="sidebar-list-item">
            <a href="insights-hub.html">
              <span class="material-icons-outlined">poll</span>
              Insights Hub
            </a>
          </li>

          <li class="sidebar-list-item active">
            <a href="system-config.html">
              <span class="material-icons-outlined">settings</span>
              System Config
            </a>
          </li>
        </ul>
      </aside>

      <!-- End Sidebar -->

      <!-- Main -->
      <main class="main-container">
        <div class="page-header">
          <div class="page-title-section">
            <h1>System Configuration</h1>
            <p class="page-subtitle">
              Manage business settings and system preferences
            </p>
          </div>
        </div>

        <div id="alertMessage" class="alert-message"></div>

        <!-- Business Settings Card -->
        <div class="settings-card">
          <h3>
            <span class="material-icons-outlined">business</span>
            Business Settings
          </h3>

          <div class="settings-group">
            <div class="settings-row">
              <div class="form-field">
                <label for="companyName">Company Name</label>
                <input
                  type="text"
                  id="companyName"
                  placeholder="Enter company name"
                />
                <small>The name of your business</small>
              </div>
              <div class="form-field">
                <label for="currency">Default Currency</label>
                <select id="currency">
                  <option value="USD">USD ($)</option>
                  <option value="EUR">EUR (€)</option>
                  <option value="GBP">GBP (£)</option>
                  <option value="INR">INR (₹)</option>
                  <option value="JPY">JPY (¥)</option>
                </select>
                <small>Currency for all transactions</small>
              </div>
            </div>

            <div class="settings-row">
              <div class="form-field">
                <label for="taxRate">Tax Rate (%)</label>
                <input
                  type="number"
                  id="taxRate"
                  min="0"
                  max="100"
                  step="0.01"
                  placeholder="Enter tax rate"
                />
                <small>Default tax percentage applied to orders</small>
              </div>
              <div class="form-field">
                <label for="lowStockThreshold">Low Stock Threshold</label>
                <input
                  type="number"
                  id="lowStockThreshold"
                  min="1"
                  placeholder="Enter threshold quantity"
                />
                <small>Minimum quantity before low stock alert</small>
              </div>
            </div>
          </div>
        </div>

        <!-- Notification Settings Card -->
        <div class="settings-card">
          <h3>
            <span class="material-icons-outlined">notifications_active</span>
            Notification Settings
          </h3>

          <div class="settings-group">
            <div class="form-field">
              <label>Enable Notifications</label>
              <div class="checkbox-group">
                <input type="checkbox" id="lowStockNotifications" />
                <label for="lowStockNotifications">Low Stock Alerts</label>
              </div>
              <small
                >Receive alerts when product quantities drop below
                threshold</small
              >
            </div>

            <div class="form-field">
              <div class="checkbox-group">
                <input type="checkbox" id="emailNotifications" />
                <label for="emailNotifications">Email Notifications</label>
              </div>
              <small>Send important notifications via email</small>
            </div>

            <div class="form-field">
              <div class="checkbox-group">
                <input type="checkbox" id="orderNotifications" />
                <label for="orderNotifications">Order Notifications</label>
              </div>
              <small>Receive alerts for new customer and supplier orders</small>
            </div>
          </div>
        </div>

        <!-- Data Management Card -->
        <div class="settings-card">
          <h3>
            <span class="material-icons-outlined">storage</span>
            Data Management
          </h3>

          <div class="settings-group">
            <div class="settings-row">
              <div class="form-field">
                <label for="auditRetention">Audit Log Retention (days)</label>
                <input
                  type="number"
                  id="auditRetention"
                  min="1"
                  max="365"
                  placeholder="Enter retention days"
                />
                <small>Number of days to keep audit logs</small>
              </div>
              <div class="form-field">
                <label for="recordsPerPage">Records Per Page</label>
                <select id="recordsPerPage">
                  <option value="10">10 Records</option>
                  <option value="25">25 Records</option>
                  <option value="50">50 Records</option>
                  <option value="100">100 Records</option>
                </select>
                <small>Default number of rows per page in tables</small>
              </div>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="settings-card">
          <div class="settings-actions">
            <button class="btn btn-secondary" onclick="resetSettings()">
              <span class="material-icons-outlined">restore</span>
              Reset to Defaults
            </button>
            <button class="btn btn-primary" onclick="saveSettings()">
              <span class="material-icons-outlined">save</span>
              Save Settings
            </button>
          </div>
        </div>
      </main>

      <!-- End Main -->
    </div>
    <!-- Profile Modals Container -->
    <div id="profileModalsContainer"></div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="js/api-client.js"></script>
    <script src="js/profile-management.js"></script>
    <script src="js/user-profile-component.js"></script>
    <script src="js/global-profile-init.js"></script>

    <script>
      // Load profile modals after scripts are ready
      function loadProfileModals() {
        console.log("Loading profile modals...");
        fetch("profile-modals.html")
          .then((response) => response.text())
          .then((html) => {
            document.getElementById("profileModalsContainer").innerHTML = html;
            console.log("Profile modals loaded successfully");
            initializeModalHandlers();
          })
          .catch((error) =>
            console.error("Error loading profile modals:", error),
          );
      }

      // Initialize modal close button listeners
      function initializeModalHandlers() {
        document.querySelectorAll(".close, [data-modal]").forEach((btn) => {
          if (
            btn.classList.contains("close") ||
            (btn.tagName === "BUTTON" && btn.getAttribute("data-modal"))
          ) {
            btn.addEventListener("click", function () {
              const modalId =
                this.getAttribute("data-modal") || this.closest(".modal")?.id;
              if (modalId) {
                closeModal(modalId);
              }
            });
          }
        });
      }

      // Load modals when DOM is ready
      document.addEventListener("DOMContentLoaded", loadProfileModals);
    </script>

    <script>
      // Mobile Menu Toggle Functionality
      const menuIcon = document.getElementById("menuIcon");
      const sidebar = document.getElementById("sidebar");
      const sidebarClose = document.getElementById("sidebarClose");
      const sidebarOverlay = document.getElementById("sidebarOverlay");

      function toggleSidebar() {
        sidebar.classList.toggle("active");
        sidebarOverlay.classList.toggle("active");
        document.body.style.overflow = sidebar.classList.contains("active")
          ? "hidden"
          : "";
      }

      function closeSidebar() {
        sidebar.classList.remove("active");
        sidebarOverlay.classList.remove("active");
        document.body.style.overflow = "";
      }

      if (menuIcon) {
        menuIcon.addEventListener("click", toggleSidebar);
      }

      if (sidebarClose) {
        sidebarClose.addEventListener("click", closeSidebar);
      }

      if (sidebarOverlay) {
        sidebarOverlay.addEventListener("click", closeSidebar);
      }

      // Close sidebar on window resize to desktop
      window.addEventListener("resize", () => {
        if (window.innerWidth > 1023) {
          closeSidebar();
        }
      });
    </script>

    <script src="js/toast-notification.js"></script>
    <script src="js/system-config.js"></script>
    <script src="js/form-validator.js"></script>
  </body>
</html>
