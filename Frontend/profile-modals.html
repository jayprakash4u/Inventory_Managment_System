<!-- User Profile Modals -->

<!-- View Profile Modal -->
<div id="viewProfileModal" class="modal">
  <div class="modal-content profile-modal profile-modal-sm">
    <div class="modal-header profile-modal-header">
      <div class="flex-center">
        <span class="material-icons-outlined icon-lg text-primary"
          >person_circle</span
        >
        <h2 class="mb-0 text-dark">My Profile</h2>
      </div>
      <span class="close icon-lg cursor-pointer" data-modal="viewProfileModal"
        >&times;</span
      >
    </div>
    <div class="modal-body profile-modal-body">
      <div class="profile-header-section">
        <div class="profile-avatar-wrapper">
          <img
            id="profileModalPicture"
            src=""
            alt="Profile Picture"
            class="profile-avatar-large"
          />
        </div>
        <div class="profile-header-info">
          <h3 id="profileFullName" class="mb-5 text-dark text-large font-bold">
            User Name
          </h3>
          <p id="profileEmail" class="mb-15 text-muted text-normal">
            user@example.com
          </p>
          <div class="profile-status-badge">
            <span class="status-dot status-active"></span>
            <span class="text-success text-small font-medium">Active</span>
          </div>
        </div>
      </div>
      <div class="profile-details-grid">
        <div class="profile-detail-item">
          <label class="detail-label">
            <span class="material-icons-outlined icon-sm">phone</span>
            Phone Number
          </label>
          <p id="profilePhone" class="detail-value">-</p>
        </div>
        <div class="profile-detail-item">
          <label class="detail-label">
            <span class="material-icons-outlined icon-sm">cake</span>
            Date of Birth
          </label>
          <p id="profileDateOfBirth" class="detail-value">-</p>
        </div>
        <div class="profile-detail-item">
          <label class="detail-label">
            <span class="material-icons-outlined icon-sm">calendar_today</span>
            Member Since
          </label>
          <p id="profileCreatedAt" class="detail-value">-</p>
        </div>
        <div class="profile-detail-item">
          <label class="detail-label">
            <span class="material-icons-outlined icon-sm">update</span>
            Last Updated
          </label>
          <p id="profileUpdatedAt" class="detail-value">-</p>
        </div>
      </div>
    </div>
    <div class="modal-footer profile-modal-footer">
      <button class="btn btn-secondary" data-modal="viewProfileModal">
        <span class="material-icons-outlined icon-sm">close</span>
        Close
      </button>
      <button class="btn btn-primary" onclick="showEditProfileModal()">
        <span class="material-icons-outlined icon-sm">edit</span>
        Edit Profile
      </button>
    </div>
  </div>
</div>

<!-- Edit Profile Modal -->
<div id="editProfileModal" class="modal">
  <div class="modal-content profile-modal">
    <div class="modal-header profile-modal-header">
      <div class="flex-center">
        <span class="material-icons-outlined icon-lg">edit</span>
        <h2 class="mb-0">Edit Profile</h2>
      </div>
      <span class="close icon-lg cursor-pointer" data-modal="editProfileModal"
        >&times;</span
      >
    </div>
    <div class="modal-body profile-modal-body">
      <form id="editProfileForm" class="flex-column">
        <div class="form-group">
          <label for="editFullName">Full Name</label>
          <input
            type="text"
            id="editFullName"
            placeholder="Enter your full name"
            required
            class="form-input"
          />
        </div>
        <div class="form-group">
          <label for="editPhone">Phone Number</label>
          <input
            type="tel"
            id="editPhone"
            placeholder="Enter your phone number"
            class="form-input"
          />
        </div>
        <div class="form-group">
          <label for="editDateOfBirth">Date of Birth</label>
          <input type="date" id="editDateOfBirth" class="form-input" />
        </div>
        <div id="editProfileMessage" class="form-message"></div>
      </form>
    </div>
    <div class="modal-footer profile-modal-footer">
      <button class="btn btn-secondary" data-modal="editProfileModal">
        <span class="material-icons-outlined icon-sm">close</span>
        Cancel
      </button>
      <button class="btn btn-primary" onclick="saveProfileChanges()">
        <span id="saveProfileBtn" class="flex-row">
          <span class="material-icons-outlined icon-sm">save</span>
          Save Changes
        </span>
        <span id="saveProfileLoader" class="hidden flex-row">
          <span class="material-icons-outlined icon-sm spin"
            >hourglass_empty</span
          >
          Saving...
        </span>
      </button>
    </div>
  </div>
</div>

<!-- Change Picture Modal -->
<div id="changePictureModal" class="modal">
  <div class="modal-content profile-modal">
    <div class="modal-header profile-modal-header">
      <div class="flex-center">
        <span class="material-icons-outlined icon-lg">photo_camera</span>
        <h2 class="mb-0">Change Profile Picture</h2>
      </div>
      <span class="close icon-lg cursor-pointer" data-modal="changePictureModal"
        >&times;</span
      >
    </div>
    <div class="modal-body profile-modal-body">
      <div class="text-center">
        <div class="image-container">
          <img id="picturePreview" src="" alt="Preview" class="preview-image" />
          <div id="noPreviewMessage" class="no-preview-message">
            <span class="material-icons-outlined icon-xl text-primary"
              >image</span
            >
            <p class="mb-0 text-muted text-normal">No image selected yet</p>
          </div>
        </div>
        <input
          type="file"
          id="pictureFileInput"
          accept="image/*"
          class="input-hidden"
        />
        <button
          class="btn btn-secondary btn-full mb-10"
          type="button"
          onclick="document.getElementById('pictureFileInput').click()"
        >
          <span class="material-icons-outlined icon-md">upload</span>
          Select Image
        </button>
        <p class="upload-requirements">JPG or PNG, max 5MB</p>
      </div>
      <div id="changePictureMessage" class="form-message mt-15"></div>
    </div>
    <div class="modal-footer profile-modal-footer">
      <button class="btn btn-secondary" data-modal="changePictureModal">
        <span class="material-icons-outlined icon-sm">close</span>
        Cancel
      </button>
      <button class="btn btn-primary" onclick="uploadProfilePicture()">
        <span id="uploadPictureBtn" class="flex-row">
          <span class="material-icons-outlined icon-sm">cloud_upload</span>
          Upload Picture
        </span>
        <span id="uploadPictureLoader" class="hidden flex-row">
          <span class="material-icons-outlined icon-sm spin"
            >hourglass_empty</span
          >
          Uploading...
        </span>
      </button>
    </div>
  </div>
</div>

<!-- Change Password Modal -->
<div id="changePasswordModal" class="modal">
  <div class="modal-content profile-modal">
    <div class="modal-header profile-modal-header">
      <div class="flex-center">
        <span class="material-icons-outlined icon-lg">lock</span>
        <h2 class="mb-0">Change Password</h2>
      </div>
      <span
        class="close icon-lg cursor-pointer"
        data-modal="changePasswordModal"
        >&times;</span
      >
    </div>
    <div class="modal-body profile-modal-body">
      <form id="changePasswordForm" class="flex-column">
        <div class="form-group">
          <label for="oldPassword">
            <span class="material-icons-outlined icon-sm vertical-middle mr-4"
              >vpn_key</span
            >
            Current Password
          </label>
          <div class="position-relative">
            <input
              type="password"
              id="oldPassword"
              placeholder="Enter current password"
              required
              class="form-input form-input-with-icon"
            />
            <button
              type="button"
              class="password-toggle"
              onclick="togglePasswordVisibility('oldPassword')"
            >
              <span class="material-icons-outlined">visibility</span>
            </button>
          </div>
        </div>
        <div class="form-group">
          <label for="newPassword">
            <span class="material-icons-outlined icon-sm vertical-middle mr-4"
              >lock_open</span
            >
            New Password
          </label>
          <div class="position-relative">
            <input
              type="password"
              id="newPassword"
              placeholder="Enter new password"
              required
              class="form-input form-input-with-icon"
            />
            <button
              type="button"
              class="password-toggle"
              onclick="togglePasswordVisibility('newPassword')"
            >
              <span class="material-icons-outlined">visibility</span>
            </button>
          </div>
        </div>
        <div class="form-group">
          <label for="confirmPassword">
            <span class="material-icons-outlined icon-sm vertical-middle mr-4"
              >lock</span
            >
            Confirm New Password
          </label>
          <div class="position-relative">
            <input
              type="password"
              id="confirmPassword"
              placeholder="Confirm new password"
              required
              class="form-input form-input-with-icon"
            />
            <button
              type="button"
              class="password-toggle"
              onclick="togglePasswordVisibility('confirmPassword')"
            >
              <span class="material-icons-outlined">visibility</span>
            </button>
          </div>
        </div>
        <small class="text-muted mt-6 display-block"
          >âœ“ At least 6 characters</small
        >
        <div id="changePasswordMessage" class="form-message"></div>
      </form>
    </div>
    <div class="modal-footer profile-modal-footer">
      <button class="btn btn-secondary" data-modal="changePasswordModal">
        <span class="material-icons-outlined icon-sm">close</span>
        Cancel
      </button>
      <button class="btn btn-primary" onclick="updatePassword()">
        <span id="updatePasswordBtn" class="flex-row">
          <span class="material-icons-outlined icon-sm">check_circle</span>
          Update Password
        </span>
        <span id="updatePasswordLoader" class="hidden flex-row">
          <span class="material-icons-outlined icon-sm spin"
            >hourglass_empty</span
          >
          Updating...
        </span>
      </button>
    </div>
  </div>
</div>
